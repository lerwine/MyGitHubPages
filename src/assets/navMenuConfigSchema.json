{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://lerwine.github.io/navMenuConfig.json",
  "type": "object",
  "definitions": {
    "navId": {
      "$id": "#/definitions/navId",
      "type": "string",
      "title": "Unique identifier for programmatic reference",
      "pattern": "^[^\\s]+$",
      "minLength": 1
    },
    "itemBase": {
      "$id": "#/definitions/itemBase",
      "type": "object",
      "required": ["label"],
      "properties": {
        "id": {
          "$ref": "#/definitions/navId",
          "title": "Unique identifier for programmatic reference"
        },
        "label": {
          "$id": "#/definitions/item/properties/label",
          "type": "string",
          "pattern": "[^\\s]",
          "title": "Menu item display text"
        },
        "tooltip": {
          "$id": "#/definitions/item/properties/tooltip",
          "type": "string",
          "title": "Menu item tooltip"
        }
      }
    },
    "subNavParent": {
      "$id": "#/definitions/subNavParent",
      "properties": {
        "topNavBar": { "$ref": "#/definitions/itemList" },
        "sideNavBar": { "$ref": "#/definitions/itemList" },
        "hideTopNav": {
          "oneOf": [
            { "$ref": "#/definitions/navId" },
            {
              "type": "array",
              "items": { "$ref": "#/definitions/navId" }
            }
          ],
          "title": "IDs of of items to hide in top navigation bar"
        },
        "hideSideNav": {
          "oneOf": [
            { "$ref": "#/definitions/navId" },
            {
              "type": "array",
              "items": { "$ref": "#/definitions/navId" }
            }
          ],
          "title": "IDs of of items to hide in side navigation bar"
        }
      }
    },
    "routerLink": {
      "$id": "#/definitions/routerLink",
      "required": ["routerLink"],
      "properties": {
        "routerLink": {
          "type": "string",
          "title": "Router link URL",
          "pattern": "^(/|(/[^/?#]+)+)$"
        }
      }
    },
    "page": {
      "$id": "#/definitions/page",
      "properties": {
        "page": {
          "type": "string",
          "title": "Page name",
          "pattern": "^[^/?#]+(/[^/?#]+)*$",
          "description": "The path to the file is relative to the assets folder, and is calculated by the current router link url prepended to the page name, and with '.htm' appended."
        },
        "heading": {
          "type": "string",
          "title": "Page Heading"
        },
        "subHeading": {
          "type": "string",
          "title": "Page sub-heading"
        },
        "description": {
          "type": "string",
          "title": "Page description"
        }
      }
    },
    "externalUrl": {
      "$id": "#/definitions/externalUrl",
      "required": ["externalUrl"],
      "properties": {
        "externalUrl": {
          "type": "string",
          "title": "Link URL"
        }
      }
    },
    "itemList": {
      "$id": "#/definitions/itemList",
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "allOf": [
          { "$ref": "#/definitions/itemBase" },
          {
            "oneOf": [
              {
                "allOf": [
                  { "$ref": "#/definitions/subNavParent" },
                  {
                    "anyOf": [
                      { "$ref": "#/definitions/routerLink" },
                      {
                        "required": ["page"],
                        "$ref": "#/definitions/page"
                      }
                    ]
                  }
                ]
              },
              { "$ref": "#/definitions/externalUrl" }
            ]
          }
        ]
      },
      "additionalItems": false
    },
    "rootNavItems": {
      "$id": "#/definitions/rootNavItems",
      "type": "array",
      "minItems": 1,
      "items": {
        "allOf": [
          { "$ref": "#/definitions/itemBase" },
          {
            "oneOf": [
              {
                "allOf": [
                  { "$ref": "#/definitions/subNavParent" },
                  { "$ref": "#/definitions/routerLink" }
                ],
                "additionalProperties": { "$ref": "#/definitions/page" }
              },
              { "$ref": "#/definitions/externalUrl" }
            ]
          }
        ]
      },
      "additionalItems": false
    }
  },
  "required": ["topNavBar"],
  "properties": {
    "topNavBar": { "$ref": "#/definitions/rootNavItems" },
    "sideNavBar": { "$ref": "#/definitions/rootNavItems" }
  }
}
